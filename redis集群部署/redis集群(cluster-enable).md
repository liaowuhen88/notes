使用集群，只需要将每个数据库节点的cluster-enable配置打开即可。每个集群中至少需要三个主数据库才能正常运行。

即使使用哨兵，redis每个实例也是全量存储，每个redis存储的内容都是完整的数据，浪费内存且有木桶效应。为了最大化利用内存，可以采用集群，就是分布式存储。即每台redis存储不同的内容。
集群至少需要3主3从，且每个实例使用不同的配置文件，主从不用配置，集群会自己选。
修改每个实例的配置文件：
```
 cluster-enabled yes  --开启集群
 cluster-config-file nodes-6382.conf --集群配置文件名，
 ```
每个实例配置的要不同，redis会根据文件名自动新建
集群的运行
redis安装目录的src执行
```
./redis-trib.rb create --replicas 1 
127.0.0.1:6380 127.0.0.1:6381 127.0.0.1:6382 
127.0.0.1:6383 127.0.0.1:6384 127.0.0.1:6385
```
这里的master选举和zookeeper的相似