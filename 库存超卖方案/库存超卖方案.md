1.redis分布式锁

分段加锁技术方案，把数据分成很多个段，每个段是一个单独的锁，
所以多个线程过来并发修改数据的时候，可以并发的修改不同段的数据。
假设场景：假如你现在iphone有1000个库存，那么你完全可以给拆成20个库存段，
在数据库的表里建20个库存字段，比如stock_01，stock_02，
类似这样的，也可以在redis之类的地方放20个库存key。
然后写一个简单的随机算法，每个请求都是随机在20个分段库存里，
选择一个进行加锁。这样每次就能够处理20个进程请求，
但有个坑需要解决：当某段锁的库存不足，
一定要实现自动释放锁然后换下一个分段库存再次尝试加锁处理

2.使用redis的队列来实现

将要促销的商品数量以队列的方式存入redis中，每当用户抢到一件促销商品则从队列中删除一个数据，确保商品不会超卖。

代码思路：

//1.当增加商品或修改商品库存时,将库存数据存入缓存

//2.如果用户下单,则在缓存的该商品库存key进行删除操作(判断删除后值不小于0)

//3.通过缓存获取商品库存数据显示在前端

//3.逻辑判断,当库存等于0时,数据持久化操作,并对商品下架处理
